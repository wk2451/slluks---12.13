require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([8],{65:function(t,e,i){"use strict";var n=c(i(1)),r=c(i(66));function c(t){return t&&t.__esModule?t:{default:t}}new n.default(r.default).$mount()},66:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(68),r=i.n(n),c=i(69),s=!1;var o=function(t){s||i(67)},a=i(0)(r.a,c.a,o,null,null);a.options.__file="..\\..\\..\\..\\Documents\\HBuilderProjects\\SLLUKS\\pages\\creatorder\\creatorder.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] creatorder.vue: functional components are not supported with templates, they should use render functions."),e.default=a.exports},67:function(t,e){},68:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{uid:0,cart_id:"",order_list:[],total:0,country:[{name:"请选择国家/地区",country_id:0}],province:[{province_name:"请选择省/区/直辖市",province_id:0}],city:[{city_name:"请选择城市",city_id:0}],district:[{district_name:"请选择区域",district_id:0}],country_index:0,province_index:0,city_index:0,district_index:0,country_id:0,province_id:0,city_id:0,district_id:0,receiver_name:"",receiver_mobile:"",receiver_address:"",out_trade_no:"",sign:""}},methods:{setOrder:function(){var t=this;wx.request({url:"https://www.slluks.com/index.php/app/member/setOrder",method:"POST",data:{buyer_id:t.uid,cart_id:t.cart_id},header:{"content-type":"application/json"},success:function(e){t.order_list=e.data;for(var i=0;i<=e.data.length;i++)t.total+=e.data[i].price*e.data[i].num,console.log(e.data[i]);t.total=t.total}})},listenerCountrySelected:function(t){this.country_index=t.detail.value,this.country_id=this.country[t.detail.value].country_id,this.province_index=0,this.city_index=0,this.district_index=0,this.province_id=0,this.city_id=0,this.district_id=0,this.province=[{province_name:"请选择省/区/直辖市",province_id:0}],this.city=[{city_name:"请选择城市",city_id:0}],this.district=[{district_name:"请选择区域",district_id:0}],this.getProvinceList()},listenerProvinceSelected:function(t){this.province_index=t.detail.value,this.province_id=this.province[t.detail.value].province_id,this.city_index=0,this.district_index=0,this.city_id=0,this.district_id=0,this.city=[{city_name:"请选择城市",city_id:0}],this.district=[{district_name:"请选择区域",district_id:0}],this.getCityList()},listenerCitySelected:function(t){this.city_index=t.detail.value,this.district_index=0,this.district_id=0,this.district=[{district_name:"请选择区域",district_id:0}],this.city_id=this.city[t.detail.value].city_id,this.getDistrictList()},listenerDistrictSelected:function(t){this.district_index=t.detail.value,this.district_id=this.district[t.detail.value].district_id},getCountryList:function(){var t=this;wx.request({url:"https://www.slluks.com/index.php/app/member/getCountry",data:{},header:{"content-type":"application/json"},success:function(e){e.data.forEach(function(e){t.country.push({country_id:e.country_id,name:e.name})})},fail:function(){console.log("加载country失败")}})},getProvinceList:function(){var t=this;wx.request({url:"https://www.slluks.com/index.php/app/member/getProvince",data:{country_id:t.country_id},method:"POST",header:{"content-type":"application/json"},success:function(e){e.data.forEach(function(e){t.province.push({province_name:e.province_name,province_id:e.province_id})})},fail:function(){console.log("加载province失败")}})},getCityList:function(){var t=this;wx.request({url:"https://www.slluks.com/index.php/app/member/getCity",data:{province_id:t.province_id},method:"POST",header:{"content-type":"application/json"},success:function(e){e.data.forEach(function(e){t.city.push({city_name:e.city_name,city_id:e.city_id})})},fail:function(){console.log("加载city失败")}})},getDistrictList:function(){var t=this;wx.request({url:"https://www.slluks.com/index.php/app/member/getDistrict",data:{city_id:t.city_id},method:"POST",header:{"content-type":"application/json"},success:function(e){e.data.forEach(function(e){t.district.push({district_name:e.district_name,district_id:e.district_id})})},fail:function(){console.log("加载district失败")}})},formSubmit:function(){wx.ruquest({url:"https://www.slluks.com/index.php/app/member/getDistrict",data:{country_id:this.country_id,province_id:this.province_id,city_id:this.city_id,district_id:this.district_id},method:"POST",header:{"content-type":"application/json"},success:function(t){console.log(t.data)},fail:function(){console.log("添加地址失败")}})},addressInput:function(t){this.receiver_address=t.detail.value,console.log(this.receiver_address)},mobileInput:function(t){this.receiver_mobile=t.detail.value,console.log(this.receiver_mobile)},nameInput:function(t){this.receiver_name=t.detail.value,console.log(this.receiver_name)},creatOrder:function(){var e=this;wx.request({url:"https://www.slluks.com/index.php/app/member/creatOrder",data:{buyer_id:e.uid,cart_id:e.cart_id,country_id:e.country_id,province_id:e.province_id,city_id:e.city_id,district_id:e.district_id,receiver_name:e.receiver_name,receiver_mobile:e.receiver_mobile,receiver_address:e.receiver_address,stringSignTemp:e.stringSignTemp},method:"POST",header:{"content-type":"application/json"},success:function(i){t.showToast({title:i.data.message,duration:1e3,icon:"none"}),1==i.data.error_code?t.switchTab({url:"/pages/cart/cart"}):(e.out_trade_no=i.data.out_trade_no,e.sign=i.data.stringSignTemp,wx.request({url:"https://api.mch.weixin.qq.com/pay/unifiedorder",method:"POST",data:{appid:"wxdfe1b8c60ee623a0",mch_id:"商户号",device_info:"WEB",nonce_str:"SLLUKS3310",sign:"签名",sign_type:"MD5",body:"SLLUKS-商品购买",out_trade_no:e.out_trade_no,fee_type:"CNY",notify_url:"https:www.slluks.com/index.php/app/order/returnPayInfo",trade_type:"JSAPI",total_fee:i.data.total_fee,spbill_create_ip:i.data.spbill_create_ip,openid:e.uid},header:{"content-type":"application/json"},succsee:function(t){console.log(t.data),console.log(e.sign)},fail:function(){console.log(111111)}}))},fail:function(){t.showToast({title:"创建订单失败",duration:1e3,icon:"none"})}})}},onLoad:function(t){this.uid=t.uid,this.cart_id=t.cart_id,this.setOrder(),this.getCountryList()},onPullDownRefresh:function(){},onTabItemTap:function(){}}}).call(e,i(2).default)},69:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"page"},[i("view",{staticClass:"title"},[t._v("\n\t\t请确认订单信息\n\t")]),i("view",{staticClass:"cart_list"},t._l(t.order_list,function(e,n){return i("view",{key:n,staticClass:"cart_info"},[i("view",[t._v(t._s(e.goods_name))]),i("view",[t._v("x "+t._s(e.num))]),i("view",[t._v(t._s(e.price))])])})),i("view",{staticClass:"price"},[i("view",[t._v("总价")]),i("view"),i("view",{staticClass:"total"},[t._v(t._s(t.total)+".00")])]),i("view",{staticClass:"bottom"},[i("button",{staticClass:"gotopay",attrs:{type:"warn",eventid:"C5T-0"},on:{tap:t.creatOrder}},[t._v("去支付")])],1),i("form",{staticClass:"address",attrs:{eventid:"fvr-8"},on:{submit:t.formSubmit}},[i("picker",{attrs:{mode:"selector",range:t.country,value:t.country_index,"range-key":"name",eventid:"sqL-1"},on:{change:t.listenerCountrySelected}},[i("text",[t._v(t._s(t.country[t.country_index].name))])]),i("picker",{attrs:{mode:"selector",range:t.province,value:t.province_index,"range-key":"province_name",eventid:"KNm-2"},on:{change:t.listenerProvinceSelected}},[i("text",[t._v(t._s(t.province[t.province_index].province_name))])]),i("picker",{attrs:{mode:"selector",range:t.city,value:t.city_index,"range-key":"city_name",eventid:"4ha-3"},on:{change:t.listenerCitySelected}},[i("text",[t._v(t._s(t.city[t.city_index].city_name))])]),i("picker",{attrs:{mode:"selector",range:t.district,value:t.district_index,"range-key":"district_name",eventid:"xQP-4"},on:{change:t.listenerDistrictSelected}},[i("text",[t._v(t._s(t.district[t.district_index].district_name))])]),i("input",{attrs:{type:"text",placeholder:"收货人详细地址",maxlength:"20",eventid:"1AA-5"},on:{blur:t.addressInput}}),i("input",{attrs:{type:"text",placeholder:"收货人姓名",maxlength:"10",eventid:"iBC-6"},on:{blur:t.nameInput}}),i("input",{attrs:{type:"text",placeholder:"收货人联系方式",maxlength:"11",eventid:"4ID-7"},on:{blur:t.mobileInput}})],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};e.a=r}},[65]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/creatorder/creatorder.js.map